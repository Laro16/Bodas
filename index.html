<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invitaci√≥n de Boda ¬∑ Jimena & David</title>
  <meta name="description" content="Invitaci√≥n digital para boda optimizada para celular, con slider, m√∫sica, contador, WhatsApp y efectos de clic/ripple" />
  <style>
    :root{
      --brand:#b08d57; --ink:#2b2a28; --muted:#6e6a60; --bg:#f8f4ee; --card:#ffffff;
      --radius:20px; --maxw:1100px;
      --shadow: 0 18px 40px rgba(0,0,0,.12), 0 4px 12px rgba(0,0,0,.08);
      --shadow-soft: 0 10px 24px rgba(0,0,0,.10), 0 2px 6px rgba(0,0,0,.06);
      --glass-border-light:rgba(0,0,0,.08); --glass-border-dark:rgba(255,255,255,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,'Helvetica Neue',Arial;
      line-height:1.6; color:var(--ink);
      /* ===== Fondo con textura tipo papel + vetas doradas (sin im√°genes) ===== */
      background:
        /* peque√±as vetas doradas dispersas */
        radial-gradient(1px 1px at 12% 18%, rgba(176,141,87,.22) 0 1px, transparent 1.2px),
        radial-gradient(1px 1px at 78% 42%, rgba(176,141,87,.18) 0 1px, transparent 1.2px),
        radial-gradient(1px 1px at 32% 76%, rgba(176,141,87,.16) 0 1px, transparent 1.2px),
        radial-gradient(1px 1px at 60% 12%, rgba(176,141,87,.18) 0 1px, transparent 1.2px),
        /* jaspeado muy suave */
        repeating-linear-gradient(145deg, rgba(0,0,0,.018) 0 2px, rgba(255,255,255,.018) 2px 4px),
        radial-gradient(1200px 800px at -10% -20%, #ffffff 0 30%, rgba(255,255,255,.96) 30% 60%, rgba(255,255,255,.94) 60% 100%),
        var(--bg);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    img{max-width:100%; display:block}
    ul,ol{margin:0; padding:0; list-style:none}

    .wrap{max-width:var(--maxw); margin:0 auto; padding:0 16px}
    a{color:inherit; text-decoration:none}

    /* ===== HERO ===== */
    header.hero{
      min-height:86svh; display:grid; place-items:center; text-align:center; position:relative; overflow:hidden; color:#fff;
      background:
        linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.65)),
        url('assets/imagenes/hero-portada.jpg') center/cover no-repeat;
    }
    header .badge{
      display:inline-block; padding:.3rem .7rem; font-weight:700; letter-spacing:.08em; text-transform:uppercase;
      background:rgba(255,255,255,.12); border:1px solid var(--glass-border-dark); border-radius:999px; backdrop-filter:blur(6px)
    }
    header h1{font-size:clamp(32px,7.5vw,64px); margin:.45rem 0 .2rem; line-height:1.08}
    header p.sub{color:#efeafc; margin:.3rem 0 .8rem}

    .cta-row{display:flex; gap:.7rem; justify-content:center; flex-wrap:wrap}
    .btn{
      appearance:none; border:none; background:var(--brand); color:#211a12; font-weight:800;
      padding:.85rem 1.05rem; border-radius:14px; cursor:pointer; box-shadow:var(--shadow-soft);
      transform:translateY(0); transition:transform .18s ease, box-shadow .18s ease, opacity .18s ease;
      position:relative; overflow:hidden; touch-action:manipulation;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:var(--shadow)}
    .btn:active{transform:translateY(0)}
    .btn.secondary{ background:#ffffffd8; color:var(--ink); border:1px solid var(--glass-border-light) }
    .btn.ghost{ background:#fff0; color:var(--ink); border:1px solid var(--glass-border-light) }
    .chip{display:inline-flex; align-items:center; gap:.5rem; padding:.45rem .85rem; border-radius:999px; background:#ffffffd8; border:1px solid var(--glass-border-light); box-shadow:var(--shadow-soft)}

    /* ===== Contador ===== */
    .countdown{display:flex; justify-content:center; gap:10px; margin:14px auto 4px; z-index:2}
    .time-box{min-width:70px; border-radius:12px; padding:9px 10px; text-align:center; color:#fff;
      background:rgba(255,255,255,.14); border:1px solid var(--glass-border-dark); backdrop-filter:blur(6px); box-shadow:inset 0 8px 30px rgba(0,0,0,.25)}
    .time-box .num{font-size:26px; font-weight:900; letter-spacing:.02em; display:block}
    .time-box .label{font-size:11px; opacity:.92; margin-top:2px}
    @media(min-width:760px){.time-box{min-width:90px; border-radius:14px; padding:11px 13px}.time-box .num{font-size:32px}}

    section{padding:60px 0}
    .title{font-size:clamp(22px,5.2vw,42px); margin:0 0 10px; text-align:center}
    .subtitle{color:var(--muted); text-align:center; margin:-2px auto 28px; max-width:720px}

    /* ===== Slider Historia ===== */
    .slider{position:relative; overflow:hidden; border-radius:var(--radius); box-shadow:var(--shadow); background:var(--card); border:1px solid var(--glass-border-light)}
    .slides{display:flex; transition:transform .5s cubic-bezier(.22,.75,.18,1); touch-action:pan-y; will-change:transform}
    .slide{min-width:100%; height:62svh; position:relative; background:#eee}
    .slide img{width:100%; height:100%; object-fit:cover}
    .overlay{position:absolute; left:12px; right:12px; bottom:12px; background:#ffffffda; border:1px solid var(--glass-border-light); color:var(--ink);
      padding:12px 14px; border-radius:12px; backdrop-filter:blur(6px); max-width:720px; margin-inline:auto; box-shadow:var(--shadow-soft)}
    .nav-btn{position:absolute; top:50%; translate:0 -50%; z-index:10; width:40px; height:40px; border-radius:999px;
      border:1px solid var(--glass-border-light); background:#ffffffd8; display:grid; place-items:center; cursor:pointer; box-shadow:var(--shadow-soft)}
    .nav-btn.prev{left:10px} .nav-btn.next{right:10px}
    .dots{position:absolute; inset:auto 0 10px; display:flex; gap:8px; justify-content:center; z-index:5}
    .dots button{width:8px; height:8px; border-radius:999px; border:0; background:#00000022}
    .dots button[aria-current="true"]{background:var(--brand)}

    /* ===== Tarjetas ===== */
    .grid{display:grid; gap:14px}
    @media(min-width:720px){.grid.three{grid-template-columns:repeat(3,1fr)} .grid.two{grid-template-columns:repeat(2,1fr)}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,1),rgba(255,255,255,.96)); border:1px solid var(--glass-border-light); border-radius:16px; overflow:hidden; box-shadow:var(--shadow-soft); transition:transform .18s ease, box-shadow .18s ease}
    .card:hover{transform:translateY(-3px); box-shadow:var(--shadow)}
    .card .body{padding:12px}
    .tag{display:inline-block; font-size:.72rem; padding:.28rem .55rem; border:1px solid var(--glass-border-light); border-radius:999px; color:var(--muted); background:#fff}
    .name{font-weight:800; margin:8px 0 2px; color:var(--ink)}
    .role{color:var(--muted)}

    /* ===== Tocadiscos (versi√≥n compacta y elegante) ===== */
    .player{
      position:fixed; right:12px; bottom:12px; z-index:50;
      display:flex; align-items:center; gap:.5rem;
      padding:.35rem .5rem; background:#ffffffd8; border:1px solid var(--glass-border-light);
      border-radius:999px; box-shadow:var(--shadow-soft); backdrop-filter:blur(8px)
    }
    .disc{
      width:22px; height:22px; border-radius:50%;
      background:
        radial-gradient(circle at 50% 50%, #333 0 6px, #111 7px 50%, #000 51% 100%),
        repeating-radial-gradient(circle at 50% 50%, rgba(255,255,255,.06) 0 2px, rgba(0,0,0,.12) 2px 4px);
      position:relative; flex:0 0 22px; box-shadow:inset 0 2px 6px rgba(255,255,255,.3), inset 0 -2px 8px rgba(0,0,0,.25);
      animation:spin 5s linear infinite; animation-play-state:paused
    }
    .disc::after{content:""; position:absolute; width:5px; height:5px; border-radius:50%; background:#b08d57; top:50%; left:50%; transform:translate(-50%,-50%)}
    .arm{ display:none } /* ocultamos el brazo para que el componente sea m√°s limpio y corto */
    .player.playing .disc{animation-play-state:running}
    @keyframes spin{to{transform:rotate(360deg)}}
    .player .label{font-weight:700; font-size:.85rem}
    .player .sub{font-size:.72rem; color:var(--muted); margin-top:-2px}
    .icon-btn{
      width:34px; height:34px; display:grid; place-items:center; border-radius:12px; border:1px solid var(--glass-border-light);
      background:#fff; box-shadow:var(--shadow-soft); cursor:pointer; transition:transform .18s ease, box-shadow .18s ease
    }
    .icon-btn:hover{transform:translateY(-1px); box-shadow:var(--shadow)}
    .icon{width:18px; height:18px; display:block}
    .icon path{fill:#3a342a}

    /* ===== Inputs ===== */
    .field{display:flex; flex-direction:column; gap:.35rem}
    .input,.select{width:100%; padding:.85rem 1rem; border-radius:12px; border:1px solid var(--glass-border-light); background:#fff; box-shadow:var(--shadow-soft); outline:none; transition:box-shadow .18s ease, transform .18s ease}
    .input:focus,.select:focus{box-shadow:var(--shadow); transform:translateY(-1px)}
    .helper{font-size:.9rem; color:var(--muted)}
    .btn.whatsapp{display:inline-flex; align-items:center; gap:.55rem}

    .signature{padding:36px 0; text-align:center; color:var(--muted)}
    .signature em{display:block; font-family: "Times New Roman", Georgia, serif; font-size:clamp(22px,4.5vw,32px); color:var(--brand)}

    /* ===== Ripple global ===== */
    .ripple{position:fixed; pointer-events:none; inset:auto auto 0 0; width:14px; height:14px; border-radius:999px; background:radial-gradient(circle, rgba(176,141,87,.55) 0%, rgba(176,141,87,.25) 45%, rgba(176,141,87,0) 60%); opacity:.9; transform:translate(-50%,-50%) scale(1); animation:rippleOut .6s ease-out forwards}
    @keyframes rippleOut{to{opacity:0; transform:translate(-50%,-50%) scale(12)}}

    @media (max-width:420px){
      .cta-row{gap:.55rem}
      .player .label{display:none}
      .player .sub{display:none}
    }

    /* ===== Lugares: im√°genes con altura unificada ===== */
    #lugares .place-media{height:200px; overflow:hidden}
    #lugares .place-media img{width:100%; height:100%; object-fit:cover; display:block}
    @media(min-width:720px){#lugares .place-media{height:220px}}

    /* ===== Itinerario: l√≠nea de tiempo (fix de solapado) ===== */
    .timeline{position:relative; max-width:900px; margin:0 auto}
    .timeline::before{content:""; position:absolute; left:30px; top:0; bottom:0; width:3px; border-radius:3px;
      background:linear-gradient(180deg, rgba(176,141,87,.6), rgba(176,141,87,.15)); box-shadow:0 0 0 1px rgba(0,0,0,.03) inset}
    .tl-item{display:grid; grid-template-columns:80px 1fr; gap:12px; align-items:start; position:relative; margin-bottom:14px}
    .tl-item:last-child{margin-bottom:0}
    .tl-time{
      font-weight:800; font-variant-numeric:tabular-nums; background:#fff; border:1px solid var(--glass-border-light);
      border-radius:999px; padding:.35rem .55rem; text-align:center; box-shadow:var(--shadow-soft);
      position:relative; z-index:2; /* por encima del adorno */
    }
    .tl-dot{
      position:absolute; left:26px; top:18px; width:12px; height:12px; border-radius:50%;
      background:radial-gradient(circle at 40% 40%, #fff 0 2px, #d8c7aa 3px 6px, #b08d57 7px);
      box-shadow:0 2px 8px rgba(0,0,0,.15);
      z-index:1; /* por debajo del horario */
    }
    .tl-card.card{background:linear-gradient(180deg,rgba(255,255,255,1),rgba(255,255,255,.96));
      border:1px solid var(--glass-border-light); border-left:4px solid var(--brand)}
    .tl-card .body{padding:12px}
    .tl-card .place{color:var(--muted); font-size:.95rem}

    /* ===== RSVP redise√±ado ===== */
    #rsvp .subtitle{margin-bottom:16px}
    .rsvp-card{
      max-width:720px; margin:0 auto; padding:16px 14px 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.86));
      border: 1px solid rgba(176,141,87,.30);
      border-left:4px solid var(--brand);
      border-radius:18px; box-shadow:var(--shadow-soft)
    }
    .rsvp-accent{display:flex; align-items:center; gap:.6rem; margin:0 0 8px 2px; color:#7b6a4c}
    .rsvp-accent .dot{width:8px; height:8px; border-radius:999px; background:var(--brand)}
    .btn.whatsapp{
      background:var(--brand); color:#211a12; border:1px solid rgba(0,0,0,.06);
      box-shadow:var(--shadow-soft); font-weight:800
    }
    .btn.whatsapp svg{width:18px; height:18px}
  </style>
</head>
<body>
  <!-- ===== HERO ===== -->
  <header class="hero" id="hero">
    <div class="wrap">
      <span class="badge">Boda</span>
      <h1 id="couple">Jimena & David</h1>
      <p class="sub" id="eventDate">18 de septiembre de 2025 ¬∑ 1:30 pm</p>

      <!-- üî¢ CONTADOR -->
      <div id="countdown" class="countdown" aria-live="polite">
        <div class="time-box"><span class="num" id="cd-days">00</span><span class="label">D√≠as</span></div>
        <div class="time-box"><span class="num" id="cd-hours">00</span><span class="label">Horas</span></div>
        <div class="time-box"><span class="num" id="cd-mins">00</span><span class="label">Minutos</span></div>
        <div class="time-box"><span class="num" id="cd-secs">00</span><span class="label">Segundos</span></div>
      </div>

      <p class="sub" id="place">Iglesia Retalhuleu ¬∑ Recepci√≥n: Sal√≥n Las Morenas</p>

      <div class="cta-row">
        <button class="btn" id="btnHistoria">Nuestra Historia</button>
        <button class="btn secondary" id="btnEscuchar">Reproducir nuestra canci√≥n</button>
      </div>
    </div>
  </header>

  <!-- ===== Tocadiscos mini (compacto) ===== -->
  <div class="player" id="player" role="region" aria-label="Reproductor de m√∫sica">
    <div class="disc" aria-hidden="true"></div>
    <div>
      <div class="label">Nuestra canci√≥n</div>
      <div class="sub" id="playerState">Pausada</div>
    </div>
    <button class="icon-btn" id="btnMusic" aria-label="Reproducir / Pausar" title="Reproducir / Pausar">
      <!-- Play/Pause icon (se intercambia por JS) -->
      <svg class="icon" id="icoPlay" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
      <svg class="icon" id="icoPause" viewBox="0 0 24 24" aria-hidden="true" style="display:none"><path d="M6 5h4v14H6zm8 0h4v14h-4z"/></svg>
    </button>
    <button class="icon-btn" id="btnMute" aria-label="Silenciar / Activar" title="Silenciar / Activar">
      <svg class="icon" id="icoVol" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 10v4h4l5 4V6l-5 4H4zm12.5 2a4.5 4.5 0 0 0-2.3-3.9v7.8a4.5 4.5 0 0 0 2.3-3.9z"/></svg>
      <svg class="icon" id="icoMute" viewBox="0 0 24 24" aria-hidden="true" style="display:none"><path d="M16.5 12a4.5 4.5 0 0 1-2.3 3.9V8.1A4.5 4.5 0 0 1 16.5 12zM4 10v4h4l5 4V6l-5 4H4zm12.6 6.2 1.4 1.4L21.6 18l-1.8-1.8L21.6 14l-1.4-1.4-1.8 1.8-1.8-1.8L15.2 14l1.8 1.8-1.8 1.8z"/></svg>
    </button>
  </div>

  <!-- ===== Nuestra Historia ===== -->
  <section id="historia" class="wrap">
    <h2 class="title">Nuestra Historia</h2>
    <p class="subtitle">Desliza para ver los momentos que los llevaron al ‚Äús√≠‚Äù. Cada foto tiene su nota y fecha.</p>

    <div class="slider" data-slider>
      <button class="nav-btn prev" data-prev aria-label="Anterior">‚üµ</button>
      <button class="nav-btn next" data-next aria-label="Siguiente">‚ü∂</button>

      <ul class="slides" data-slides>
        <li class="slide">
          <img src="assets/imagenes/historia-1.jpg" alt="Cuando nos conocimos" loading="lazy" decoding="async"/>
          <div class="overlay"><b>Fecha: 02-09-2025</b> ¬∑ Cuando nos conocimos. Una mirada bast√≥ para empezar la aventura.</div>
        </li>
        <li class="slide">
          <img src="assets/imagenes/historia-2.jpg" alt="Primera cita" loading="lazy" decoding="async"/>
          <div class="overlay"><b>Fecha: 16-10-2025</b> ¬∑ Primera cita. Risas, caf√© y mil planes por delante.</div>
        </li>
        <li class="slide">
          <img src="assets/imagenes/historia-3.jpg" alt="Primer viaje" loading="lazy" decoding="async"/>
          <div class="overlay"><b>Fecha: 08-01-2026</b> ¬∑ Nuestro primer viaje. Descubrimos que el mejor destino es estar juntos.</div>
        </li>
        <li class="slide">
          <img src="assets/imagenes/historia-4.jpg" alt="La propuesta" loading="lazy" decoding="async"/>
          <div class="overlay"><b>Fecha: 12-02-2027</b> ¬∑ ¬°Dijo que s√≠! El comienzo de una nueva etapa.</div>
        </li>
      </ul>
      <div class="dots" data-dots></div>
    </div>
  </section>

  <!-- ===== Padrinos ===== -->
  <section id="padrinos" class="wrap">
    <h2 class="title">Padrinos</h2>
    <div class="grid three">
      <article class="card">
        <img src="assets/imagenes/padrino-velacion.jpg" alt="Padrino de velaci√≥n" loading="lazy" decoding="async"/>
        <div class="body"><span class="tag">Velaci√≥n</span><div class="name">Carlos Mendoza</div><div class="role">Padrino de Velaci√≥n</div></div>
      </article>
      <article class="card">
        <img src="assets/imagenes/madrina-anillos.jpg" alt="Madrina de anillo" loading="lazy" decoding="async"/>
        <div class="body"><span class="tag">Anillo</span><div class="name">Mar√≠a L√≥pez</div><div class="role">Madrina de Anillo</div></div>
      </article>
      <article class="card">
        <img src="assets/imagenes/padrino-arras.jpg" alt="Padrino de arras" loading="lazy" decoding="async"/>
        <div class="body"><span class="tag">Arras</span><div class="name">Jorge Ram√≠rez</div><div class="role">Padrino de Arras</div></div>
      </article>
    </div>
  </section>

  <!-- ===== Lugares ===== -->
  <section id="lugares" class="wrap">
    <h2 class="title">Lugares</h2>
    <p class="subtitle">Ceremonia y recepci√≥n. Toca ‚ÄúVer ubicaci√≥n‚Äù para abrir el mapa.</p>
    <div class="grid two">
      <article class="card">
        <div class="place-media">
          <img src="assets/imagenes/ceremonia.jpg" alt="Lugar de la ceremonia" loading="lazy" decoding="async"/>
        </div>
        <div class="body">
          <h3 style="margin:.2rem 0 .4rem">Ceremonia ‚Äî Iglesia Retalhuleu</h3>
          <p class="helper">Llegar 15 minutos antes. Estacionamiento frente a la entrada.</p>
          <a class="btn" href="https://maps.google.com/?q=Iglesia%20Retalhuleu" target="_blank" rel="noopener">Ver ubicaci√≥n</a>
        </div>
      </article>
      <article class="card">
        <div class="place-media">
          <img src="assets/imagenes/recepcion.jpg" alt="Lugar de la recepci√≥n" loading="lazy" decoding="async"/>
        </div>
        <div class="body">
          <h3 style="margin:.2rem 0 .4rem">Recepci√≥n ‚Äî Sal√≥n Las Morenas</h3>
          <p class="helper">Cena, brindis y baile.</p>
          <a class="btn" href="https://maps.google.com/?q=Salon%20Las%20Morenas" target="_blank" rel="noopener">Ver ubicaci√≥n</a>
        </div>
      </article>
    </div>
  </section>

  <!-- ===== Itinerario ===== -->
  <section id="itinerario" class="wrap">
    <h2 class="title">Itinerario</h2>
    <ul class="timeline">
      <li class="tl-item">
        <div class="tl-time">6:00 pm</div>
        <div class="tl-card card"><div class="body"><b>Ceremonia</b><div class="place">Iglesia Retalhuleu. Llegar 15 minutos antes.</div></div></div>
        <span class="tl-dot" aria-hidden="true"></span>
      </li>
      <li class="tl-item">
        <div class="tl-time">8:00 pm</div>
        <div class="tl-card card"><div class="body"><b>Recepci√≥n</b><div class="place">Sal√≥n Las Morenas. Cena, brindis y baile.</div></div></div>
        <span class="tl-dot" aria-hidden="true"></span>
      </li>
      <li class="tl-item">
        <div class="tl-time">10:30 pm</div>
        <div class="tl-card card"><div class="body"><b>Pastel</b><div class="place">Corte del pastel y fotos.</div></div></div>
        <span class="tl-dot" aria-hidden="true"></span>
      </li>
      <li class="tl-item">
        <div class="tl-time">12:00 am</div>
        <div class="tl-card card"><div class="body"><b>Despedida</b><div class="place">Gracias por acompa√±arnos. üíï</div></div></div>
        <span class="tl-dot" aria-hidden="true"></span>
      </li>
    </ul>
  </section>

  <!-- ===== RSVP ===== -->
  <section id="rsvp" class="wrap">
    <h2 class="title">Confirmar asistencia</h2>
    <p class="subtitle">Por favor confirma tu asistencia un mes antes del evento. ¬°Gracias!</p>

    <form class="rsvp-card" id="rsvpForm">
      <div class="rsvp-accent"><span class="dot" aria-hidden="true"></span><strong>Tu espacio</strong> ¬∑ Nos encantar√° contar contigo</div>

      <div class="grid" style="grid-template-columns:1fr; gap:12px">
        <label class="field">
          <span>Tu nombre completo</span>
          <input class="input" id="guestName" name="guestName" type="text" placeholder="Tu nombre completo" required />
        </label>

        <label class="field">
          <span>Cantidad de acompa√±antes</span>
          <select class="select" id="companions" name="companions">
            <option value="0">Asistir√© sin acompa√±antes</option>
            <option value="1">Asistir√© con 1 acompa√±ante</option>
            <option value="2">Asistir√© con 2 acompa√±antes</option>
            <option value="3">Asistir√© con 3 acompa√±antes</option>
            <option value="4">Asistir√© con 4 acompa√±antes</option>
            <option value="5">Asistir√© con 5 acompa√±antes</option>
            <option value="-1">No podr√© asistir</option>
          </select>
        </label>

        <div style="display:flex; gap:.8rem; align-items:center; flex-wrap:wrap">
          <button type="submit" class="btn whatsapp" id="btnWhatsapp" aria-label="Confirmar por WhatsApp">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#211a12" d="M20.5 3.5a10 10 0 0 0-16.2 11.3L3 21l6.4-1.3A10 10 0 0 0 20.5 3.5Zm-1.1 13a8 8 0 0 1-11.8 1.5l-.3-.2-3 .6.6-2.9-.2-.3A8 8 0 1 1 19.4 16.5ZM8.9 7.9c.2-.5.4-.5.7-.5h.6c.2 0 .5 0 .7.5s.9 1.5.9 1.6.1.4 0 .6-.2.4-.4.6-.4.5-.2.9c.2.4 1 1.6 2.1 2.6 1.5 1.3 2.7 1.7 3.1 1.9s.5 0 .7-.2.8-.9 1-1.2.4-.2.6-.1.6.3 1.4.7 1.2.6 1.4.9.1.9-.2 1.5c-.3.6-1.2 1.1-1.6 1.1s-.9.2-3-.8a13.6 13.6 0 0 1-3.8-2.4 12.2 12.2 0 0 1-2.2-2.6c-.8-1.2-1.1-2.1-1.2-2.4-.2-.4 0-.8.1-1s.5-1.2.6-1.4Z"/></svg>
            Confirmar por WhatsApp
          </button>
          <span class="helper">Tambi√©n puedes llamar al <a href="tel:54389207">54 38 92 07</a>.</span>
        </div>
      </div>
    </form>
  </section>

  <footer class="signature">
    <div>Con cari√±o,</div>
    <em>Escobar</em>
  </footer>

  <!-- ===== Audio ===== -->
  <audio id="bgMusic" src="assets/musica/fondo.mp3" preload="auto" loop></audio>
  <audio id="voiceInvite" src="assets/musica/invitacion.mp3" preload="auto"></audio>

  <script>
    // ===== Utils
    const $  = (s, el=document) => el.querySelector(s);
    const $$ = (s, el=document) => [...el.querySelectorAll(s)];

    // Scroll a historia
    $('#btnHistoria')?.addEventListener('click', ()=> $('#historia').scrollIntoView({behavior:'smooth'}));

    // ===== Slider
    const slider = $('[data-slider]');
    const track  = slider?.querySelector('[data-slides]');
    const slides = $$('.slide', slider);
    const dotsC  = slider?.querySelector('[data-dots]');
    const prev   = slider?.querySelector('[data-prev]');
    const next   = slider?.querySelector('[data-next]');
    let i = 0, x0 = null;

    function go(n){
      if(!track) return;
      i = (n + slides.length) % slides.length;
      track.style.transform = `translateX(${-i*100}%)`;
      if(dotsC) [...dotsC.children].forEach((d,idx)=> d.setAttribute('aria-current', idx===i));
    }
    slides.forEach((_s, idx)=>{
      const b = document.createElement('button');
      b.type = 'button'; b.className = 'btn'; b.style.padding = '.35rem'; b.style.borderRadius = '999px'; b.style.width='28px'; b.style.height='28px'; b.style.display='grid'; b.style.placeItems='center';
      b.setAttribute('aria-label', `Ir a la foto ${idx+1}`);
      b.addEventListener('click', ()=> go(idx));
      dotsC.appendChild(b);
    });
    go(0);
    prev?.addEventListener('click', ()=> go(i-1));
    next?.addEventListener('click', ()=> go(i+1));
    track?.addEventListener('pointerdown', e=>{ x0 = e.clientX; track.setPointerCapture(e.pointerId); });
    track?.addEventListener('pointerup',   e=>{ if(x0===null) return; const dx = e.clientX - x0; x0=null; if(Math.abs(dx) > 40) go(i + (dx<0?1:-1)); });
    window.addEventListener('keydown', e=>{ if(e.key==='ArrowRight') go(i+1); if(e.key==='ArrowLeft')  go(i-1); });

    // ===== Audio & Tocadiscos (compacto)
    const bg = $('#bgMusic'), voice = $('#voiceInvite');
    const bPlay = $('#btnMusic'), bMute = $('#btnMute');
    const icoPlay = $('#icoPlay'), icoPause = $('#icoPause');
    const icoVol  = $('#icoVol'),  icoMute = $('#icoMute');
    const player = $('#player'), playerState = $('#playerState');
    let bgStarted = false;

    function updBtns(){
      const isPaused = bg.paused;
      const isMuted  = bg.muted;
      player.classList.toggle('playing', !isPaused);
      playerState.textContent = isPaused ? 'Pausada' : 'Reproduciendo';
      icoPlay.style.display  = isPaused ? 'block' : 'none';
      icoPause.style.display = isPaused ? 'none'  : 'block';
      icoVol.style.display   = isMuted ? 'none' : 'block';
      icoMute.style.display  = isMuted ? 'block' : 'none';
    }
    function tryStartBg(){
      if(!bgStarted){
        bg.volume = .6;
        bg.play().then(()=>{bgStarted=true;updBtns();}).catch(()=>{});
      }
    }

    bPlay?.addEventListener('click', ()=>{ if(bg.paused) bg.play(); else bg.pause(); updBtns(); });
    bMute?.addEventListener('click', ()=>{ bg.muted = !bg.muted; updBtns(); });
    $('#btnEscuchar')?.addEventListener('click', ()=>{ if(!bgStarted || bg.paused){ tryStartBg(); } else { bg.pause(); } updBtns(); });

    $('#voiceInvite')?.addEventListener('play', ()=>{ if(!bg.paused){ bg.pause(); updBtns(); } });

    document.addEventListener('click', tryStartBg, {once:true});
    bg.addEventListener('play', updBtns);
    bg.addEventListener('pause', updBtns);

    // ===== Contador (zona horaria del dispositivo)
    const target = new Date('2025-09-18T13:30:00');
    const d = $('#cd-days'), h = $('#cd-hours'), m = $('#cd-mins'), s = $('#cd-secs');
    function tick(){
      const now = new Date(); let diff = target - now;
      if (diff <= 0) { d.textContent=h.textContent=m.textContent=s.textContent='00'; return; }
      const dd = Math.floor(diff / 86400000); diff %= 86400000;
      const hh = Math.floor(diff / 3600000);  diff %= 3600000;
      const mm = Math.floor(diff / 60000);    diff %= 60000;
      const ss = Math.floor(diff / 1000);
      d.textContent = String(dd).padStart(2,'0');
      h.textContent = String(hh).padStart(2,'0');
      m.textContent = String(mm).padStart(2,'0');
      s.textContent = String(ss).padStart(2,'0');
    }
    tick(); setInterval(tick, 1000);

    // ===== RSVP ‚Üí WhatsApp
    const WHATSAPP_NUMBER = '54389207'; // agrega c√≥digo de pa√≠s si hace falta, ej: '50254389207'
    $('#rsvpForm')?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = $('#guestName').value.trim();
      const companions = $('#companions').value;
      if(!name){ alert('Por favor, escribe tu nombre.'); return; }

      const attending = companions !== '-1';
      const compText = companions === '-1' ? 'No podr√© asistir'
        : (companions === '0' ? 'Asistir√© sin acompa√±antes'
        : `Asistir√© con ${companions} acompa√±ante${companions==='1'?'':'s'}`);

      const dateText = $('#eventDate')?.textContent?.trim() ?? '';
      const placeText = $('#place')?.textContent?.trim() ?? '';
      const msg = `Hola, soy ${name}. ${compText}. Evento: ${dateText}. ${placeText}.`;

      const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
      window.open(url, '_blank');

      const btn = $('#btnWhatsapp');
      btn.disabled = true; btn.style.opacity = .7; btn.textContent = 'Abriendo WhatsApp‚Ä¶';
      setTimeout(()=>{ btn.disabled = false; btn.style.opacity = 1; btn.textContent = 'Confirmar por WhatsApp'; }, 1800);
    });

    // ===== Depuraci√≥n de im√°genes rotas
    document.querySelectorAll('img').forEach(img => {
      img.addEventListener('error', () => {
        const missing = img.getAttribute('src') || '';
        const ph = document.createElement('div');
        ph.style.cssText = 'display:grid;place-items:center;background:#f1f1f1;color:#b00;font:12px/1.2 system-ui,Arial;height:100%;text-align:center;padding:10px';
        ph.textContent = 'No se encontr√≥:\n' + missing;
        img.replaceWith(ph);
        console.warn('Imagen no encontrada (revisa may√∫sculas/min√∫sculas y ruta):', missing);
      }, {once:true});
    });

    // ===== Efecto global ripple =====
    function spawnRipple(x,y){
      const r = document.createElement('span');
      r.className = 'ripple';
      r.style.left = x + 'px';
      r.style.top  = y + 'px';
      document.body.appendChild(r);
      r.addEventListener('animationend', ()=> r.remove(), {once:true});
    }
    document.addEventListener('click', (e)=>{
      spawnRipple(e.clientX, e.clientY);
      const t = e.target.closest('.btn');
      if(t){
        const rect = t.getBoundingClientRect();
        const inner = document.createElement('span');
        inner.style.position='absolute'; inner.style.inset='0'; inner.style.overflow='hidden';
        const dot = document.createElement('span');
        dot.style.position='absolute'; dot.style.width=dot.style.height='12px'; dot.style.borderRadius='999px';
        dot.style.background='radial-gradient(circle, rgba(33,26,18,.2) 0%, rgba(33,26,18,0) 70%)';
        dot.style.transform='translate(-50%,-50%)';
        dot.style.left=(e.clientX-rect.left)+'px'; dot.style.top=(e.clientY-rect.top)+'px';
        dot.animate([{opacity:.35, transform:'translate(-50%,-50%) scale(1)'},{opacity:0, transform:'translate(-50%,-50%) scale(14)'}], {duration:500, easing:'ease-out'});
        inner.appendChild(dot); t.appendChild(inner);
        setTimeout(()=> inner.remove(), 520);
      }
    });
  </script>
</body>
</html>
